/* *********************************************************************** *
 * project: org.matsim.*
 *                                                                         *
 * *********************************************************************** *
 *                                                                         *
 * copyright       : (C) 2007 by the members listed in the COPYING,        *
 *                   LICENSE and WARRANTY file.                            *
 * email           : info at matsim dot org                                *
 *                                                                         *
 * *********************************************************************** *
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *   See also COPYING, LICENSE and WARRANTY file                           *
 *                                                                         *
 * *********************************************************************** */
package playground.yu.test;

import java.io.IOException;

import net.opengis.kml._2.BoundaryType;
import net.opengis.kml._2.DocumentType;
import net.opengis.kml._2.FolderType;
import net.opengis.kml._2.KmlType;
import net.opengis.kml._2.LinearRingType;
import net.opengis.kml._2.ObjectFactory;
import net.opengis.kml._2.PlacemarkType;
import net.opengis.kml._2.PointType;
import net.opengis.kml._2.PolygonType;
import net.opengis.kml._2.ScreenOverlayType;

import org.apache.log4j.Logger;
import org.matsim.api.basic.v01.Coord;
import org.matsim.api.core.v01.ScenarioImpl;
import org.matsim.core.api.network.Link;
import org.matsim.core.config.Config;
import org.matsim.core.config.MatsimConfigReader;
import org.matsim.core.gbl.Gbl;
import org.matsim.core.network.KmlNetworkWriter;
import org.matsim.core.network.NetworkLayer;
import org.matsim.core.utils.geometry.CoordImpl;
import org.matsim.core.utils.geometry.CoordinateTransformation;
import org.matsim.core.utils.geometry.geotools.MGC;
import org.matsim.core.utils.geometry.transformations.TransformationFactory;
import org.matsim.roadpricing.RoadPricingScheme;
import org.matsim.roadpricing.RoadPricingWriterXMLv1;
import org.matsim.vis.kml.KMZWriter;
import org.matsim.vis.kml.MatsimKMLLogo;

import playground.dgrether.analysis.gis.ShapeFileNetworkWriter;
import playground.dgrether.analysis.gis.ShapeFilePolygonWriter;
import playground.dgrether.roadpricing.EditableNetworkLayer;

import com.vividsolutions.jts.geom.Coordinate;
import com.vividsolutions.jts.geom.CoordinateSequence;
import com.vividsolutions.jts.geom.GeometryFactory;
import com.vividsolutions.jts.geom.LinearRing;
import com.vividsolutions.jts.geom.Point;
import com.vividsolutions.jts.geom.Polygon;
import com.vividsolutions.jts.geom.impl.CoordinateArraySequence;

/**
 * it's only a copy of Grether's
 * codes:playground.dgrether.roadpricing.TollSchemeGenerator
 * 
 * @author dgrether
 * 
 */
public class TollSchemeGenerator {

	private static final Logger log = Logger
			.getLogger(TollSchemeGenerator.class);

	private static final String SCHWEIZCHCONF = "../matsimTests/toll/config.xml";
	private static final String IVTOUTSCHEME = "../matsimTests/toll/KantonZurichToll.xml";
	private static final String SCHWEIZCHOUTBASE = "../matsimTests/toll";
	private static final String SCHWEIZCHGISOUTBASE = "../matsimTests/toll";
	private static final String googleEarthPolyCoordsZurichStadt = "8.778184761431527,47.22549634547848,0 8.745805466477153,47.21300675529223,0 8.743797011815289,47.21203085278854,0 8.74144604219423,47.21157645872133,0 "
			+ "8.717490705765634,47.20345948783833,0 8.713239349623867,47.20285366194224,0 8.710104972792486,47.20049957810738,0 8.705856445319517,47.20224901784625,0 8.702835477399658,47.20103448654165,0 "
			+ "8.703281096271599,47.19905876642471,0 8.702720971155671,47.19799523221725,0 8.698022761525552,47.19655332491812,0 8.696009876007127,47.19663000011437,0 8.694332120412135,47.19617466576415,0 "
			+ "8.685828334132248,47.18652759726128,0 8.683368250573365,47.18561644249677,0 8.681355105443547,47.18386934238803,0 8.681354238451828,47.181817836867,0 8.680347078806246,47.17923465574366,0 "
			+ "8.680682104001312,47.17839876633844,0 8.681128998281494,47.17779079683558,0 8.681687385879073,47.17649893825985,0 8.682581030638247,47.1750550116081,0 8.682468835664054,47.17406722746845,0 "
			+ "8.691520099970493,47.1688213976514,0 8.692189309697946,47.16623746511495,0 8.69263479811786,47.1633495577597,0 8.687716841083029,47.16251528882393,0 8.685034645430667,47.16259209002676,0 "
			+ "8.681011073546216,47.16183321580346,0 8.676652229927411,47.16054227268992,0 8.675087407362984,47.1594786318073,0 8.670729183340573,47.15955533307243,0 8.667711931949139,47.15940371072107,0 "
			+ "8.663800827601351,47.16023999750564,0 8.661677603821339,47.16046809623664,0 8.660448551569665,47.16381185205052,0 8.66123096325239,47.16555962555566,0 8.661454655664443,47.16791529648987,0 "
			+ "8.660784163851291,47.16920712164426,0 8.660784222631513,47.17011897199694,0 8.658548902113168,47.17034698038005,0 8.656090037355163,47.16981506307184,0 8.652736992069439,47.17080278929767,0 "
			+ "8.650725208672448,47.17034674885561,0 8.646701637331383,47.16989046458114,0 8.642007623067817,47.16882600088336,0 8.639660243883046,47.16981345354402,0 8.640218851628847,47.17072540779679,0 "
			+ "8.638094948297479,47.17156087758745,0 8.633400491253143,47.17140787841002,0 8.630941146516841,47.17209114428282,0 8.628258542563547,47.17193842073525,0 8.625016665674071,47.17246933910103,0 "
			+ "8.62401018664511,47.1733048769887,0 8.624009536376471,47.17452067606924,0 8.625015009124253,47.17566080239143,0 8.625126397242163,47.17642069901836,0 8.62814334656205,47.17915706069347,0 "
			+ "8.6259068145998,47.1804481401514,0 8.625906167779903,47.18166387991582,0 8.620647898714616,47.1874369178211,0 8.620311708102406,47.18857654227348,0 8.621093621647798,47.18979251730801,0 "
			+ "8.617625382530338,47.19237473369373,0 8.617065806002804,47.192982394354,0 8.617959585801117,47.1941224414944,0 8.616728084256575,47.19594558556945,0 8.615831261957512,47.19868063712636,0 "
			+ "8.613369159467585,47.2005793195377,0 8.612920725287436,47.20179488733398,0 8.610235486927309,47.20270567160878,0 8.609003647804084,47.20422487565082,0 8.605870741934695,47.2050594329369,0 "
			+ "8.602964657021841,47.20285458371622,0 8.602181714575107,47.20277824242278,0 8.599945923944652,47.20148543096866,0 8.598827486797235,47.20133291571274,0 8.598155526703488,47.20201646508225,0 "
			+ "8.597931091662016,47.20262424922602,0 8.597147673215122,47.20292780889709,0 8.596474183400623,47.2048271600486,0 8.597032350916191,47.20581527741177,0 8.596583466045317,47.2069548787459,0 "
			+ "8.59770011043593,47.20870315136148,0 8.596132080563326,47.21007020247176,0 8.594451540058749,47.21181715520062,0 8.593556216157751,47.21196869491006,0 8.591319092840417,47.21143562438152,0 "
			+ "8.588296633506145,47.21234593642766,0 8.586066648450373,47.21096809834962,0 8.583718374186351,47.21051069888449,0 8.582263671733594,47.21096562991127,0 8.58192515576164,47.21309288792101,0 "
			+ "8.581140443426529,47.21430805883445,0 8.581362880651488,47.21521997811453,0 8.58350450997489,47.21693296668349,0 8.583503762515857,47.2174867784558,0 8.582733038990435,47.21794777689581,0 "
			+ "8.580378103603181,47.21745390218186,0 8.579308630992252,47.21750828068534,0 8.578372171014808,47.21776196126246,0 8.577685196864122,47.21810058052708,0 8.57731082242765,47.21805793470774,0 "
			+ "8.576935676355443,47.21852392591394,0 8.576374271629877,47.21835398692419,0 8.576438036740548,47.21746391339445,0 8.575440586685657,47.21678502228895,0 8.574317288045313,47.21678421691657,0 "
			+ "8.574378567747045,47.21750483496596,0 8.573191563221753,47.21830932277218,0 8.571319046231988,47.2184774899271,0 8.570757715096955,47.21826513550985,0 8.567387334995926,47.21843210735364,0 "
			+ "8.564077771538399,47.21944678618083,0 8.56027054165844,47.21944366200052,0 8.558895824120334,47.22029026997938,0 8.558269814220896,47.22126467387732,0 8.557770469302181,47.22126424947796,0 "
			+ "8.55377216105971,47.22299873798909,0 8.552776117471741,47.22164139548818,0 8.546907530342427,47.22197514316665,0 8.545722322655013,47.22155011867128,0 8.539669634048078,47.22272191290842,0 "
			+ "8.538164418984106,47.22190163995148,0 8.536959237395061,47.22169571214899,0 8.536659937561623,47.22077431535732,0 8.533040578664934,47.22179393064908,0 8.532140451645534,47.2200531171986,0 "
			+ "8.531392768717723,47.2175960503836,0 8.528979804275068,47.21830979852825,0 8.52219631856476,47.21891613094726,0 8.521441686381337,47.21932463295339,0 8.521579895038457,47.21989137872862,0 "
			+ "8.520971084325073,47.21933807152136,0 8.516698974665761,47.21947111171446,0 8.51271212114494,47.21935568606087,0 8.512542021752729,47.21853638842366,0 8.51272676511206,47.21712380535435,0 "
			+ "8.512278749106866,47.21558757145633,0 8.510379511657856,47.21558515457299,0 8.509205149211507,47.21509222633681,0 8.508481968369217,47.21496843468201,0 8.507579458505095,47.21429155598898,0 "
			+ "8.505317039266902,47.21477999536501,0 8.505862482763071,47.21379787332377,0 8.503334550462023,47.21225878638413,0 8.501526995615143,47.21182632648497,0 8.498451624905151,47.21194493044104,0 "
			+ "8.498088759031701,47.21231299918858,0 8.495105188653644,47.21194020447111,0 8.49302491679645,47.21193721544948,0 8.490857002140098,47.2110125942017,0 8.489591293592467,47.21082643319484,0 "
			+ "8.484081590311872,47.20836081443835,0 8.48335738995373,47.20854399541211,0 8.479919739661124,47.20866148754075,0 8.477204174796629,47.20921007838866,0 8.476297721924706,47.20976153768052,0 "
			+ "8.47503330190494,47.20914514305347,0 8.47322630703996,47.20846639897926,0 8.472860907241183,47.20951021290237,0 8.473581093428969,47.2105557994488,0 8.472083305482139,47.21180393363196,0 "
			+ "8.470573377352951,47.21180145836541,0 8.470136856496069,47.21326558807657,0 8.468304307306813,47.21296958889437,0 8.466898488745031,47.21399265174745,0 8.4615070409521,47.21347080574707,0 "
			+ "8.459879227923048,47.21610483932547,0 8.456742122866441,47.21837004575987,0 8.455447746840598,47.21829454260707,0 8.453377658620918,47.21782098893048,0 8.45212616607904,47.21838446231519,0 "
			+ "8.453017135546563,47.2187497132905,0 8.452300423780347,47.21947576691274,0 8.450456154006989,47.21947246416913,0 8.450097461655089,47.21991629807858,0 8.448074375550327,47.21999345088788,0 "
			+ "8.448130200974491,47.22092292098964,0 8.44681682746806,47.22205193605116,0 8.446281364755951,47.22205095618216,0 8.446633034133308,47.22338505283376,0 8.444730411349806,47.22305829705443,0 "
			+ "8.443958575838702,47.22265279379641,0 8.443302801259762,47.22297484079084,0 8.442943686745716,47.22349947623566,0 8.442586041356933,47.22366044305597,0 8.441270957517586,47.22515309186395,0 "
			+ "8.439253114041037,47.22389664660071,0 8.437587968588394,47.22369145256681,0 8.432469390274353,47.22404529919332,0 8.429728617475139,47.2248885411871,0 8.425829836862903,47.22374490731437,0 "
			+ "8.422114232596661,47.22345693396662,0 8.421279478867081,47.22541850522988,0 8.418660397455472,47.22616105233153,0 8.417409416968892,47.22877620422084,0 8.416565750189296,47.232607623473,0 "
			+ "8.416270973485689,47.23681423102867,0 8.414746233718205,47.23896147872565,0 8.41433004903427,47.23961509290428,0 8.416526505642384,47.24111557855261,0 8.415406339162811,47.24233700260916,0 "
			+ "8.41357662487377,47.24480234283931,0 8.410904686434726,47.2478356137221,0 8.403601664016842,47.25370758934787,0 8.403028007151132,47.25665032479002,0 8.404411186492755,47.26007222287676,0 "
			+ "8.403282598792002,47.26196905221593,0 8.401176052375639,47.26348382527702,0 8.40074518762548,47.26576206413203,0 8.402398637722499,47.27117882684483,0 8.40196905946847,47.27317217820477,0 "
			+ "8.396070448667828,47.27705273076732,0 8.394098548569179,47.27942253351991,0 8.392955858524234,47.28388360660289,0 8.391543012442266,47.28634972250079,0 8.38900423705393,47.28985806667122,0 "
			+ "8.391819402973088,47.29087769981853,0 8.397179801179281,47.28785375645671,0 8.404168288399955,47.29089184379205,0 8.403721186713742,47.2915993485211,0 8.413211456418354,47.29279579101945,0 "
			+ "8.415946213249246,47.2937302950518,0 8.416767955917358,47.29373196136886,0 8.419018308265043,47.29489503925962,0 8.418875921711695,47.29528186148679,0 8.420290952702436,47.29571717872162,0 "
			+ "8.420003959996317,47.29648552521218,0 8.42191056265267,47.29788296168722,0 8.422296046057268,47.29775732080404,0 8.426640244248102,47.29965171225986,0 8.429094535551672,47.3005857217865,0 "
			+ "8.4286490786576,47.30107675973036,0 8.430048448490769,47.30364839142803,0 8.430647168052619,47.30498867695561,0 8.429514218421748,47.30599767143917,0 8.429186966297188,47.30709023052196,0 "
			+ "8.432123841359211,47.30835307111329,0 8.432364019797529,47.30873615445589,0 8.43185584799587,47.31143690690755,0 8.435951701701089,47.31402554874831,0 8.436447683724641,47.31518106442749,0 "
			+ "8.438150882817304,47.3151163700306,0 8.441252826533232,47.3159371785496,0 8.440544331421693,47.31770170276116,0 8.445844654382027,47.31995279262603,0 8.449136686782648,47.32349062215388,0 "
			+ "8.448732713631717,47.32430495737202,0 8.45003092357884,47.32539406003932,0 8.44882566122334,47.32613904962248,0 8.452323267896647,47.32852269484003,0 8.451811243153461,47.32908632193193,0 "
			+ "8.455245478088152,47.33385815415094,0 8.454274190147334,47.33459843504379,0 8.453770654954633,47.33414093181182,0 8.45326910726963,47.33316974984282,0 8.451120155848319,47.33356545270374,0 "
			+ "8.451081163901048,47.33276632266259,0 8.450037143393923,47.33056706813429,0 8.446041087657273,47.32961810316988,0 8.444485932748822,47.32895890156115,0 8.443685177542699,47.32915718440324,0 "
			+ "8.442180570097444,47.32742242807069,0 8.441612605959204,47.32715839479362,0 8.440809111812266,47.32756013251587,0 8.439930830066395,47.32727797986796,0 8.439750712616799,47.32704972699233,0 "
			+ "8.437553343823259,47.32674754576966,0 8.436648907434655,47.32653544689227,0 8.434947207241159,47.32523482802855,0 8.431924648264813,47.32680118330203,0 8.431555654153627,47.3264351420191,0 "
			+ "8.429444201935599,47.32706822142448,0 8.421496748776185,47.32535763436678,0 8.416272766487356,47.32457655112556,0 8.415094087456978,47.3262124713516,0 8.414168575449445,47.32611398508886,0 "
			+ "8.41259750410039,47.3269796258771,0 8.412661751081485,47.32847628473459,0 8.413586642176355,47.32871959967581,0 8.414005495881815,47.33055492883763,0 8.416981709946734,47.33394036396118,0 "
			+ "8.41633362676831,47.33543559503074,0 8.41682692909272,47.33659524296282,0 8.416469149027165,47.33693245045462,0 8.41582774218203,47.33697941529535,0 8.414902714824358,47.33673613144767,0 "
			+ "8.413973141415509,47.33745837950096,0 8.413685882904552,47.33794056532261,0 8.413114314910978,47.33827733290206,0 8.41240253420704,47.33813102760137,0 8.412328761353713,47.33866193666874,0 "
			+ "8.411402073347523,47.33875657467701,0 8.411040739400718,47.33981796261976,0 8.408896871830709,47.34111706221271,0 8.407541374304346,47.34145219721875,0 8.404099753843045,47.34665773757295,0 "
			+ "8.40583739500984,47.34914044798698,0 8.406066114140236,47.35113501714292,0 8.409494705657233,47.35495156364112,0 8.407652742054268,47.3555706512631,0 8.40694010491411,47.36024121554441,0 "
			+ "8.40554014533099,47.36436554786859,0 8.408963477841436,47.36651434834661,0 8.407252568649575,47.36957438976718,0 8.39989643978625,47.37070747848221,0 8.400161948858917,47.37415481652801,0 "
			+ "8.396759352407701,47.3760623042868,0 8.395835099783986,47.3808451166298,0 8.395776556711816,47.39267364576221,0 8.390626981534519,47.39474928274512,0 8.384461686519185,47.39438696414727,0 "
			+ "8.379029883047654,47.3995786233334,0 8.373955921588603,47.39878065308156,0 8.367570233955172,47.39905961176597,0 8.365827444485714,47.39934992709765,0 8.362769829042998,47.40120841124928,0 "
			+ "8.362474046255993,47.4021898600809,0 8.365520180968325,47.40239392416855,0 8.367561497446737,47.40063106393768,0 8.369144006277654,47.40309043940772,0 8.375810885304952,47.40457999297043,0 "
			+ "8.379594101917277,47.40262469375887,0 8.384457990729651,47.40603216816827,0 8.38108798988311,47.40880002016124,0 8.380888918128647,47.41119689920658,0 8.385096463894408,47.41446250488024,0 "
			+ "8.381913920059221,47.41603440135441,0 8.383585933599322,47.41768098712401,0 8.386580495665179,47.41636130446281,0 8.391323877850754,47.41997344825226,0 8.391967610994005,47.42193346503528,0 "
			+ "8.391221388932561,47.4234461018027,0 8.38858010551434,47.42572863381632,0 8.387697375578753,47.42698645143929,0 8.387528299083249,47.42791244384711,0 8.384700207643157,47.42792926869372,0 "
			+ "8.380849566092959,47.42892373861735,0 8.37815714112762,47.42902887033768,0 8.375845974058995,47.42972955871795,0 8.375181030654957,47.43076869207918,0 8.374789320451843,47.43206868696287,0 "
			+ "8.376613085013513,47.43379907612453,0 8.37886590396608,47.43295193599393,0 8.379375539511205,47.43320663991812,0 8.381456133633375,47.43270468588505,0 8.381897164986611,47.43305138618065,0 "
			+ "8.382749972609652,47.43282298852217,0 8.383966973040561,47.43462323724032,0 8.383930878101085,47.43501488422552,0 8.384912116241585,47.43630761967295,0 8.384944992967366,47.43653812915374,0 "
			+ "8.383817091582337,47.43724980340656,0 8.383675560574185,47.43826337589722,0 8.384083418886988,47.43844868883943,0 8.383666586477098,47.43999162232306,0 8.381756421183479,47.44042491851367,0 "
			+ "8.381806704517976,47.44260041087517,0 8.381333107693358,47.44281232352653,0 8.381642888290033,47.4438072608545,0 8.380900435157139,47.44522578964239,0 8.380894273722797,47.44639753687328,0 "
			+ "8.382311460429824,47.44647192735627,0 8.382096620691664,47.447394633382,0 8.382248186937238,47.44853127359211,0 8.388369783818281,47.45029217248549,0 8.38661863739979,47.45375156377334,0 "
			+ "8.386145587431892,47.45380373897884,0 8.385122338879164,47.45358819071512,0 8.384786157717993,47.45371889645647,0 8.384588188063503,47.45407145030861,0 8.384584346362207,47.45482467643218,0 "
			+ "8.383588253869759,47.45493447200803,0 8.383349744358398,47.45522237161444,0 8.381690909890789,47.45513823881884,0 8.380838724753092,47.45491180109796,0 8.380293384696881,47.45550397687552,0 "
			+ "8.379409212791529,47.45538219175398,0 8.379399160734423,47.4572965867288,0 8.377624112075983,47.45830932295814,0 8.376654261623994,47.45764888084994,0 8.375859487030677,47.45734781101023,0 "
			+ "8.373285374264016,47.45883713874211,0 8.373365499593088,47.46039281290474,0 8.370970048076483,47.46152359150938,0 8.369542687163678,47.46361397303095,0 8.369717067881323,47.46409301956234,0 "
			+ "8.369444686437863,47.46534870423566,0 8.36847017363425,47.46552576088578,0 8.365896915689264,47.46671587194221,0 8.368268740093823,47.4699524867266,0 8.369594422192538,47.47031473615012,0 "
			+ "8.371455098004505,47.4699603538653,0 8.375431828961199,47.47110677233403,0 8.373730003492232,47.47481197768636,0 8.374054417989578,47.48025728581578,0 8.373163243648955,47.48133210218732,0 "
			+ "8.363162474026884,47.48070922783113,0 8.362957462137539,47.49055217461032,0 8.362280013962103,47.49517174697811,0 8.357703810998833,47.49802094862574,0 8.362575837952965,47.50045408027125,0 "
			+ "8.35964048550256,47.50110685483451,0 8.358331210632779,47.50220387308398,0 8.357703082118936,47.50239575359986,0 8.359177806603446,47.50424951187065,0 8.35861515608541,47.50525142251141,0 "
			+ "8.358934914479871,47.50616155606455,0 8.359813807695538,47.50669687076451,0 8.362439103851184,47.50800047563691,0 8.361673141677796,47.50986969215831,0 8.36330011305278,47.51076717572757,0 "
			+ "8.366910890392624,47.51099987458944,0 8.369112817774413,47.5117504376773,0 8.370402282703505,47.51145062704964,0 8.371899923397844,47.51179196627869,0 8.373902475330324,47.51118922755702,0 "
			+ "8.375196986560034,47.51213772760804,0 8.376994610579674,47.51247974924713,0 8.378588795063335,47.51349648462803,0 8.379680730000425,47.51498466137208,0 8.379178036721243,47.5155236332366,0 "
			+ "8.380375289620464,47.51599921299848,0 8.381528381151862,47.52505070498719,0 8.384811599385467,47.52836773995513,0 8.386610045265964,47.52870974049807,0 8.389817360873906,47.52729918952636,0 "
			+ "8.389120656853869,47.52662219894306,0 8.389422680231197,47.52621772052649,0 8.390522736775194,47.52622033208358,0 8.39202778530316,47.52521090197468,0 8.393525557243732,47.52568715417229,0 "
			+ "8.395713710953739,47.52819104341977,0 8.395111356335434,47.52866238090032,0 8.394897696170494,47.53149842966555,0 8.399356605801016,47.532907466757,0 8.403915186292604,47.53347783331006,0 "
			+ "8.404462035686052,47.53478563807129,0 8.40146434304026,47.5397945521377,0 8.404262098084177,47.53817648397401,0 8.404398474151556,47.53922720025554,0 8.405737661615998,47.5401850650191,0 "
			+ "8.404948164127692,47.54257062320805,0 8.406074331930144,47.54371899106898,0 8.406650699708669,47.54152394697121,0 8.407561502389665,47.54334027022437,0 8.411087228732344,47.54563967882719,0 "
			+ "8.41320722691237,47.54607391824104,0 8.417522894267131,47.54589203404239,0 8.415247700351841,47.54841778884602,0 8.415667059236579,47.54951683343713,0 8.417008258478887,47.55014035425045,0 "
			+ "8.414877660389591,47.55195023257414,0 8.414943324275958,47.55304854695866,0 8.414656589586446,47.55385963915705,0 8.416548758775559,47.55777895048765,0 8.417819895154015,47.55830685551048,0 "
			+ "8.418169966743751,47.55911932043358,0 8.417099278929182,47.561170303106,0 8.41843153578276,47.56384714033634,0 8.418286980631251,47.56451536036115,0 8.418992017599059,47.5650898619655,0 8.425753970948474,47.56770627076856,0 "
			+ "8.43059268302345,47.56613243106659,0 8.4563881574293,47.57195714992486,0 8.461775606788169,47.57140783335333,0 8.466331326675082,47.57178846583434,0 8.47115593917869,47.57440535923148,0 8.476958297447009,47.57752522948115,0 "
			+ "8.484285031451606,47.57678131557455,0 8.488067989100561,47.57785120585352,0 8.490271962673406,47.5793444149371,0 8.49460519881843,47.58110667896426,0 8.491594302146766,47.58519999445561,0 8.488824745715872,47.58769720786775,0 "
			+ "8.483226490416501,47.58657142669442,0 8.481811361372033,47.58507922778574,0 8.480155387423308,47.58481064441511,0 8.47983868371429,47.58512946718393,0 8.475028725135497,47.58427060175561,0 8.470452170746439,47.58431662283597,0 "
			+ "8.468955139820555,47.58372883339738,0 8.46729734432034,47.58393903936827,0 8.46491481145846,47.58797986964901,0 8.46310016946375,47.58787047632353,0 8.4627826599133,47.58834894709845,0 8.460888635671974,47.58834583900752,0 "
			+ "8.461345105521813,47.59271084777615,0 8.457380268697358,47.59728179074067,0 8.456965582709511,47.60217826158279,0 8.460281959165044,47.60202391324182,0 8.463912279844335,47.60229584227775,0 "
			+ "8.468801071431768,47.60374071337662,0 8.468246235655226,47.60432540278953,0 8.468402282148313,47.60480473262879,0 8.468163813593909,47.6052302246225,0 8.468637070672196,47.60533742018328,0 8.470136800372263,47.60539295723993,0 "
			+ "8.470843662764942,47.60635223221024,0 8.471711251036147,47.60656648701591,0 8.470441243582824,47.60837453117899,0 8.471151178602776,47.60853531696623,0 8.473835814137953,47.60843289983953,0 8.475180460275109,47.6077428647607,0 "
			+ "8.478080050897557,47.61100510541741,0 8.478077042624605,47.61188004160207,0 8.478400097059648,47.61231801386816,0 8.478721648781738,47.61319345134047,0 8.47807024722874,47.61384864942055,0 8.479039933974979,47.61501673216801,0 "
			+ "8.480014153849471,47.61487240064692,0 8.483047838522921,47.61356460781297,0 8.484267955097955,47.61401648633375,0 8.484773014090782,47.6145866460721,0 8.486970395020377,47.61441906636853,0 8.488404868142123,47.61499055928987,0 "
			+ "8.493222301368437,47.61448500825138,0 8.502002356125239,47.61643294030694,0 8.503182658223956,47.6172316196233,0 8.505463393134306,47.61729154467394,0 8.5058021402308,47.61700730422557,0 8.508166290446615,47.61740890236531,0 "
			+ "8.50723197684477,47.61823275122934,0 8.509074397591396,47.61846798447815,0 8.509130748242262,47.61889504390308,0 8.508323931302524,47.61904929879093,0 8.507918684663897,47.61974750315687,0 8.50814172094778,47.62223213058634,0 "
			+ "8.507273027085835,47.62378379335337,0 8.508483636780486,47.62347474611282,0 8.508944344804776,47.62351413429187,0 8.510615717119086,47.62320564161711,0 8.511998018419369,47.623246144105,0 8.512977214376488,47.62324732877463,0 "
			+ "8.514013442827952,47.62344266313244,0 8.515223231423175,47.6233664719871,0 8.515220260997529,47.62441454575431,0 8.512914683057144,47.62495525059399,0 8.512797565214921,47.62561502624278,0 8.513658571363838,47.62666416306933,0 "
			+ "8.514062801225123,47.62631527227197,0 8.515327943222765,47.62705432438772,0 8.514865001202168,47.62779134507864,0 8.515209064808254,47.62833522135293,0 8.516015302985394,47.62841380154874,0 "
			+ "8.515668120684826,47.62895687280295,0 8.514975512911251,47.62942190542763,0 8.515488706490524,47.63124707247629,0 8.516523311173749,47.63206351152368,0 8.515888265828838,47.63252864195308,0 "
			+ "8.515945089816254,47.63280046062305,0 8.515712395533452,47.63357663874503,0 8.517611998635751,47.63412231965459,0 8.520838053216224,47.63416476499147,0 8.521531506132574,47.63338909832223,0 "
			+ "8.525511314618299,47.63153008524984,0 8.530004077163653,47.63161256534503,0 8.530982806039777,47.63180770056619,0 8.531731619123697,47.63180848974961,0 8.533418335775266,47.63115601117476,0 "
			+ "8.534954518316839,47.63119457926618,0 8.535778139202153,47.63093658287845,0 8.536820944458219,47.63078973942939,0 8.538246666621268,47.63112398225605,0 8.538905743386371,47.63082882769331,0 "
			+ "8.539350396033335,47.62835184539497,0 8.538641744806355,47.62639143066024,0 8.54280980309005,47.62695021987924,0 8.54418550282384,47.62502888617192,0 8.545337416128243,47.62506698031172,0 "
			+ "8.547585839016056,47.62540190766308,0 8.54824474463882,47.62510673947634,0 8.548683520919528,47.62514412882101,0 8.549725798601751,47.62514510951556,0 8.550548498061287,47.62521982666122,0 "
			+ "8.552579236351814,47.62470406566263,0 8.554005572387935,47.62466839242566,0 8.554719065294751,47.62448416756443,0 8.555651334570488,47.62463290134507,0 8.557791226531498,47.62437598224676,0 "
			+ "8.558395683884609,47.6238219035092,0 8.559991193512405,47.62127212069705,0 8.560814663467388,47.62090309626753,0 8.560541415409748,47.62034826902026,0 8.561859868121415,47.6192402074098,0 "
			+ "8.562851421564028,47.61687480533738,0 8.568336411182786,47.61684227871197,0 8.569268497690244,47.6170648461328,0 8.5705875836552,47.61543907320974,0 8.570204492672463,47.61492116405533,0 "
			+ "8.570315472283225,47.61414482861182,0 8.57124807040943,47.61403462223912,0 8.571632489493954,47.61373913329184,0 8.570974680235411,47.61351680094075,0 8.571140923841732,47.61248170067201,0 "
			+ "8.574267734338575,47.61215126683651,0 8.574542615622349,47.61174476726085,0 8.573117912495876,47.61093033168907,0 8.57032075604957,47.61096521611416,0 8.566483694869341,47.6098161108159,0 "
			+ "8.566488818920044,47.60689532309946,0 8.566271292119792,47.60585992984115,0 8.566053384055099,47.60504636702519,0 8.565395870231312,47.60475006985531,0 8.564083019489633,47.6029743433679,0 8.561892812879556,47.6012718200131,0 "
			+ "8.56314898898691,47.59933180947873,0 8.562083644628281,47.59893154213587,0 8.559714635890041,47.59888963530458,0 8.556815466070047,47.59736950363197,0 8.556519032606172,47.5975289950864,0 8.555928821287013,47.59649005425779,0 "
			+ "8.55583430503285,47.59523388345042,0 8.556274354060328,47.59405342945612,0 8.550478523566889,47.59198168012595,0 8.548070110363819,47.59242223666726,0 8.541181075709865,47.59005365902296,0 8.536921051458288,47.58665407626383,0 "
			+ "8.539228138325877,47.58252316663455,0 8.53685494101191,47.58100266240417,0 8.540529183934124,47.57777974028218,0 8.537819099778037,47.57766934820906,0 8.535113705898276,47.57551520738799,0 8.539421069525012,47.57422903282242,0 "
			+ "8.544681286096076,47.57455707433406,0 8.54691500335036,47.57369874825945,0 8.546918173421446,47.57219283651652,0 8.546282784727826,47.57111655164113,0 8.544529239213892,47.57111482692174,0 8.541662618002546,47.56982111984058,0 "
			+ "8.545493722381563,47.56735084225786,0 8.549968314826952,47.56186879010312,0 8.550776267517543,47.55649038841196,0 8.555885081462451,47.55208376578955,0 8.558594145734521,47.55219368025882,0 "
			+ "8.567819616566286,47.56220654853006,0 8.569087350240583,47.56640296297572,0 8.571148263722195,47.57296623977123,0 8.573058420233719,47.57468864376133,0 8.578636353602335,47.57598317424056,0 "
			+ "8.580705463829808,47.57824331395101,0 8.577825580116086,47.584479875408,0 8.57782011786921,47.58792163248855,0 8.581003523724633,47.59179561877169,0 8.586103764872169,47.59394981149543,0 8.593118899520649,47.59578215666882,0 "
			+ "8.59519021324197,47.59750407337987,0 8.594547486591669,47.60126801437388,0 8.595758233320543,47.6055306097761,0 8.596278764698685,47.60633453508791,0 8.599405801117088,47.60799367498735,0 8.603574402335621,47.61126050021269,0 "
			+ "8.604912906482721,47.61382273189624,0 8.605059713255079,47.6160328243267,0 8.598641221381664,47.62537228399947,0 8.597145471604168,47.62989233874156,0 8.596915263776468,47.63556869061221,0 8.595510951302341,47.63999483445502,0 "
			+ "8.595819850605317,47.64322652025907,0 8.601238923813785,47.64533689997095,0 8.603113415107851,47.64751572766586,0 8.603944337751361,47.65074799366787,0 8.606236884004817,47.65236507870332,0 8.610722263750398,47.6507511172975,0 "
			+ "8.613331012837211,47.64836344315374,0 8.61406308113777,47.6454832508503,0 8.613647157501418,47.6440077471582,0 8.612292903005294,47.64260213105566,0 8.61041694573353,47.64182856209987,0 8.608540625914733,47.64154673174006,0 "
			+ "8.605413111597089,47.6414750495729,0 8.603745641915017,47.64091225796517,0 8.602912501158892,47.64006886182382,0 8.603330709669216,47.63887483634639,0 8.604582840753492,47.63768122189632,0 8.60656419215432,47.63690942618278,0 "
			+ "8.608857573972554,47.63684021111956,0 8.615632728919522,47.637686012055,0 8.620218826767603,47.63888197669537,0 8.624700028120653,47.64197458163566,0 8.628971866229122,47.6491421042285,0 8.629092703309905,47.65155201135853,0 "
			+ "8.626779167643521,47.65408231260123,0 8.614634093232498,47.66137929419813,0 8.613044732903653,47.66079464016418,0 8.608272513198925,47.66342112587162,0 8.607400606770629,47.66799614293048,0 "
			+ "8.605808924198104,47.66945573846062,0 8.606529186585856,47.67188982859032,0 8.608119254642279,47.6720851763162,0 8.609320256743029,47.67185263793373,0 8.610610569198292,47.6758282002936,0 8.613757384628723,47.678703209494,0 "
			+ "8.615475717622079,47.67793285302283,0 8.618569603048371,47.67515839324539,0 8.624293914618127,47.67647084356599,0 8.626468443451605,47.67824469727329,0 8.627268735543021,47.68040365491446,0 "
			+ "8.627043127144818,47.68063979946895,0 8.623545100961644,47.68962928364523,0 8.624160652027324,47.69101257641575,0 8.62482815039942,47.69149685781943,0 8.625547527625429,47.69115128977418,0 8.626471901729129,47.69160105495696,0 "
			+ "8.630869751591931,47.69198855820234,0 8.637845423089583,47.69324060406305,0 8.641245567120972,47.69442097023632,0 8.642402462691194,47.69446832059693,0 8.644400871980963,47.69409101382454,0 "
			+ "8.660462118419749,47.68587117122458,0 8.663322568314896,47.68519807000409,0 8.663630591809927,47.68576820131464,0 8.669559366984171,47.68467909053631,0 8.669789884659538,47.68156902873591,0 "
			+ "8.668095571977803,47.67762979813743,0 8.668249478970214,47.67685223304599,0 8.668865296296847,47.67586724349469,0 8.668788279167233,47.67555623235467,0 8.669327089677241,47.67446755816643,0 8.67248343124947,47.67327470358773,0 "
			+ "8.672685771052482,47.67354213466425,0 8.673442931018666,47.67299691589324,0 8.675819114141351,47.67234594053959,0 8.677072382996506,47.67178303258771,0 8.677283274164156,47.66973937155355,0 "
			+ "8.677759450505933,47.66848453919744,0 8.678799403708267,47.66848434928491,0 8.679102205593672,47.66720035455934,0 8.678928511350962,47.66626660935029,0 8.678711621212035,47.66565385546549,0 "
			+ "8.677541785861465,47.66579997318826,0 8.677497794246333,47.66401994503462,0 8.67771388933026,47.66256084004322,0 8.678969929310764,47.66142251749172,0 8.67933417484468,47.66150776020226,0 "
			+ "8.679541591102728,47.66080827532566,0 8.67929646034202,47.65993099194903,0 8.680852366093996,47.65798341731916,0 8.682334621696235,47.65728407832133,0 8.683149368083011,47.65588584208797,0 "
			+ "8.684705577417828,47.65498671851942,0 8.684927203800674,47.65348872802851,0 8.686558009035348,47.6536381042781,0 8.688409653173006,47.65099120027838,0 8.68826083601267,47.64994265500724,0 "
			+ "8.690039468511335,47.64949273314912,0 8.692929494185588,47.64839327104962,0 8.693299876389036,47.64804360761518,0 8.694411577315391,47.64789342161532,0 8.69500460143658,47.64799308082397,0 8.698488038702079,47.64764223442904,0 "
			+ "8.698932343205549,47.64704283792355,0 8.699895916625541,47.64704244940877,0 8.700488815069283,47.64694233472702,0 8.70100685859278,47.64584353053035,0 8.702820207156748,47.64499518844331,0 8.703762795191851,47.64417772029363,0 "
			+ "8.708304947238794,47.64237765785662,0 8.70877921528349,47.64196626961409,0 8.710747197405615,47.64342735440305,0 8.712307381837462,47.64392917618665,0 8.712446900131001,47.64376979214055,0 8.714265971509249,47.6441418236919,0 "
			+ "8.71481818825524,47.64296955164429,0 8.715885757648508,47.64307556446371,0 8.716991275315637,47.64179645862752,0 8.720073982523619,47.64102238380061,0 8.720391180615872,47.64179466505836,0 8.7216956880573,47.64171403993645,0 "
			+ "8.723395756281438,47.64181962781274,0 8.72367343480769,47.6425652821799,0 8.724226841195225,47.64251169105927,0 8.724622418970823,47.64269791453041,0 8.724741397730746,47.64299084268624,0 8.729603738845668,47.64272153837739,0 "
			+ "8.730630847386786,47.64216152884065,0 8.735017640626669,47.64114646274712,0 8.73588841308241,47.64183841654425,0 8.735928344050063,47.64210475344824,0 8.736561017741121,47.64218422728325,0 8.738181297058317,47.64175691088406,0 "
			+ "8.740356310958401,47.6421282653408,0 8.743006217209251,47.64273895666501,0 8.743678128644161,47.64260526753422,0 8.743084470211269,47.64223279845215,0 8.743202604826658,47.64193970426051,0 8.743439088247605,47.64148669858476,0 "
			+ "8.743515316728752,47.63972859641484,0 8.745768128381856,47.63930065823377,0 8.747308955089181,47.63866013553503,0 8.748142586785075,47.64065728200404,0 8.74960663277086,47.64132203585015,0 8.749883310274607,47.6412685353347,0 "
			+ "8.752216025881864,47.64121333033764,0 8.752336927362912,47.64249184151143,0 8.755349522564773,47.6420810014809,0 8.755816838515909,47.64293225681836,0 8.757479923866802,47.6428411830158,0 8.758478738731899,47.64328854984262,0 "
			+ "8.759680574824225,47.64548383995786,0 8.762542993233085,47.64624325864797,0 8.7652760905622,47.64879565658855,0 8.766341407137235,47.64915323885945,0 8.768672165656721,47.65009229883724,0 8.770734330487297,47.64986616935889,0 "
			+ "8.772863603518729,47.64990887844772,0 8.774591147108371,47.64883137561417,0 8.776321372111781,47.64896407507865,0 8.777454126305706,47.64968007653047,0 8.777988801731381,47.65071046022405,0 "
			+ "8.781851559252464,47.65218555626273,0 8.785585171556869,47.65513991095668,0 8.786184304801466,47.65522890071276,0 8.785857709997364,47.65769465499288,0 8.786590876606388,47.65814210664111,0 8.786664189025364,47.66083161781099,0 "
			+ "8.787264992953393,47.6615481926004,0 8.788805351668891,47.6652672537517,0 8.794086803884358,47.6648929701175,0 8.798302291581031,47.66509078385276,0 8.799405464813955,47.66481911502869,0 8.803220031401935,47.66515243341257,0 "
			+ "8.805626303976251,47.66433839814298,0 8.804721895646983,47.66393399181571,0 8.803709189661772,47.6607586461002,0 8.80521386271089,47.66055401491477,0 8.805105893125639,47.65791829838418,0 8.804501883950922,47.65724320277712,0 "
			+ "8.804394772765081,47.65487787339149,0 8.805297431506475,47.65474156825609,0 8.804788979080671,47.65237676902711,0 8.807696315543247,47.65156205204572,0 8.80970359969716,47.65176220053386,0 8.814513621966647,47.64972827737774,0 "
			+ "8.81601927677252,47.64992898997957,0 8.816117128362391,47.64911783563004,0 8.816921268130605,47.64958983133636,0 8.819025827100539,47.64877590029921,0 8.82073241892202,47.6490438578595,0 8.826244169847668,47.64687320311357,0 "
			+ "8.826743673503305,47.64619660301018,0 8.826436750302252,47.64437220457954,0 8.827236151388219,47.64335722056302,0 8.826832416370181,47.64261435909788,0 8.828030721522426,47.64085530739553,0 8.826617035719107,47.63801874067688,0 "
			+ "8.825612520287791,47.63761471031008,0 8.825104320256953,47.63552024730989,0 8.823997043392016,47.63430530763074,0 8.82489839934663,47.63383085152088,0 8.820653625211683,47.63047318563098,0 8.820839866832449,47.62879206208488,0 "
			+ "8.817965052741567,47.62957163447632,0 8.81757678549979,47.62814988253152,0 8.816044319849173,47.62879835474227,0 8.813929817625017,47.62737884168368,0 8.812956833118832,47.6258159689094,0 8.8137236774584,47.62555625721743,0 "
			+ "8.813207463912193,47.62417688769691,0 8.812183937246189,47.62417816209671,0 8.812051614783343,47.62279834894786,0 8.813909020752853,47.62226671386181,0 8.812849112800167,47.62147600355376,0 8.814258396802103,47.62131584115048,0 "
			+ "8.814138351627204,47.62052397327303,0 8.813198000043483,47.62036674660347,0 8.812960252694735,47.6194958402829,0 8.811548533408985,47.61886400384006,0 8.81307241208469,47.61783253018898,0 8.812117053143794,47.61764311141395,0 "
			+ "8.8141352210063,47.61691943279264,0 8.814014828014225,47.61643882432246,0 8.812232098981131,47.61644106473766,0 8.810628434530157,47.6152744186083,0 8.808987171790161,47.61499993188589,0 8.808676389496462,47.61396346103631,0 "
			+ "8.806729133282147,47.61417319424997,0 8.804882119753225,47.61362243946361,0 8.803948006471721,47.60975290254038,0 8.804356983251182,47.60940679210205,0 8.803841593122348,47.60843978194092,0 8.80425038300851,47.60802459551018,0 "
			+ "8.803426503050954,47.60671240601088,0 8.803558003849723,47.60436089792869,0 8.801803173252889,47.60275372690072,0 8.803230546368052,47.60114267966901,0 8.80163951034746,47.60114462947139,0 8.800525790353333,47.60114598297546,0 "
			+ "8.797983109949165,47.60222189599857,0 8.795119232086528,47.60222527566689,0 8.79012954435915,47.60322811826037,0 8.787966617324495,47.60420396815492,0 8.788212961559804,47.60647499319249,0 8.79110538023034,47.60841857221693,0 "
			+ "8.790386851583079,47.60971730917831,0 8.788219940667197,47.60923303582871,0 8.780767429062284,47.61216151018863,0 8.776196352915626,47.6126530161969,0 8.7735532361146,47.61444038905706,0 8.771387361054119,47.61444255369244,0 "
			+ "8.762008595652917,47.61785870993391,0 8.759119911329794,47.61753684102804,0 8.756230061309951,47.6165659168207,0 8.750218645985125,47.61965381655424,0 8.748538998800267,47.62273805005648,0 8.746129347287084,47.62111745151607,0 "
			+ "8.746365294169255,47.61819670703643,0 8.745881046242218,47.61641234587315,0 8.746356821978727,47.61300478352366,0 8.742745505810861,47.61203415818847,0 8.74009859923412,47.61219842062555,0 8.739610982815798,47.60798048603508,0 "
			+ "8.74225714987575,47.60749176902362,0 8.741771622789374,47.60473409376622,0 8.748019291911824,47.5998621838887,0 8.74608897841382,47.59645687665066,0 8.747290184367344,47.59548255092273,0 8.748968549358052,47.59223665186144,0 "
			+ "8.764203697013498,47.59254348337133,0 8.806138341385303,47.58260361838362,0 8.808050762704829,47.571909628458,0 8.816919431947898,47.57070052143712,0 8.824617596496399,47.57348295543198,0 8.830531465711093,47.57307515968345,0 "
			+ "8.83702862319825,47.57027181146577,0 8.838196493601815,47.56588035638629,0 8.843516708263095,47.56507373013265,0 8.849420991292206,47.56227056452683,0 8.85059359540943,47.55947515423596,0 8.842315601315093,47.55988790368306,0 "
			+ "8.83934767852956,47.55670018517715,0 8.831070233807029,47.55711212541466,0 8.829288418689998,47.55472047033171,0 8.839875847295103,47.53834228512297,0 8.841628619253296,47.53235328221395,0 8.84694557053489,47.53154630809969,0 "
			+ "8.855706441663525,47.53105527410239,0 8.869818346236544,47.53001466163325,0 8.879414308371544,47.52654847199836,0 8.884226376157386,47.52836368269657,0 8.898621620308926,47.52427804280262,0 8.895899627244519,47.51982307820742,0 "
			+ "8.895577819850526,47.51495758929937,0 8.897660016453203,47.51069538417448,0 8.897848798363448,47.5071384140524,0 8.893007232342193,47.49947281255447,0 8.892520361334542,47.48825566193541,0 8.896010064077498,47.48706758164627,0 "
			+ "8.898186308229484,47.48529175997197,0 8.891625607893163,47.48353412606627,0 8.886374465655884,47.48147828489994,0 8.883735680508933,47.47735058083197,0 8.881977113377996,47.47469714072911,0 8.884588839447929,47.47262552677458,0 "
			+ "8.885448222103866,47.46937651152661,0 8.889814213911972,47.46907256184316,0 8.893724721116744,47.46463646190877,0 8.891724420384692,47.46433315305016,0 8.895765019313597,47.46281539810169,0 8.899637409318313,47.45525969908326,0 "
			+ "8.907149204166259,47.45043214007718,0 8.907422295506162,47.44920501357296,0 8.907835806221691,47.44816627791187,0 8.906852760753823,47.4468474570844,0 8.906568229992011,47.4457158352382,0 8.902515496788361,47.44430903679134,0 "
			+ "8.910784462912906,47.43586762794883,0 8.912101572619886,47.43675275816467,0 8.918924281294093,47.43602720362485,0 8.922331010015075,47.43477626731444,0 8.925481443647346,47.43476901853661,0 8.927060330885777,47.43547575093675,0 "
			+ "8.930995595424292,47.43493370106179,0 8.931643087377086,47.43421776122101,0 8.92835091129092,47.43150731764359,0 8.92739853269925,47.43136648963311,0 8.926762635260307,47.43108185339845,0 8.922330398096719,47.43280888873841,0 "
			+ "8.910065289084038,47.43297962168011,0 8.908579127421524,47.43176686175347,0 8.90783896262411,47.43176848598396,0 8.907832504101833,47.43040941339992,0 8.909518779098232,47.42926122327339,0 8.913002713557876,47.42818055182762,0 "
			+ "8.91107784587733,47.4236785100381,0 8.913697457073212,47.41888031920406,0 8.914223556661007,47.41837845014809,0 8.912736335340732,47.41687969622605,0 8.912610467791609,47.41273139014804,0 8.911762463474522,47.41223258109471,0 "
			+ "8.909639594820177,47.41037754842764,0 8.909528401829084,47.40923334686832,0 8.906662837378836,47.40673611095367,0 8.904011904126744,47.40488207353814,0 8.904320514739368,47.40309317385559,0 8.903682051897953,47.40216465059999,0 "
			+ "8.907057617294974,47.40086983539236,0 8.911286016140835,47.40114669969744,0 8.915031405419775,47.39987931264629,0 8.919608498747806,47.39951472454914,0 8.927569633537829,47.39577700943189,0 8.927693159129543,47.39435986389718,0 "
			+ "8.929519942539585,47.39347000860649,0 8.931209869550195,47.39142925104265,0 8.93617347156728,47.39008896750017,0 8.943605833017168,47.38573141048151,0 8.94359240282251,47.38325187251832,0 8.941883073948787,47.38157357580312,0 "
			+ "8.940171026638646,47.37936391026267,0 8.945115767845238,47.37474643597771,0 8.94805283990296,47.37443826399593,0 8.951715656444073,47.37127183554432,0 8.951943475047974,47.36811418506672,0 8.960459365930459,47.35562906927034,0 "
			+ "8.960449959025304,47.3539673322688,0 8.964864997983653,47.35395535704821,0 8.96854232739569,47.35361287924784,0 8.969512853297614,47.35178219875068,0 8.97251874121325,47.3523918298264,0 8.974814405778712,47.34723828068177,0 "
			+ "8.973849291013947,47.34610112589685,0 8.974536886624197,47.33987514314499,0 8.979116194326551,47.33773312608101,0 8.979337824526883,47.33445669778925,0 8.977150776486912,47.33249733716733,0 8.976640619825517,47.32807644133422,0 "
			+ "8.979765013899598,47.32528326139746,0 8.979516371520573,47.32413742989501,0 8.985047481067207,47.31986314829622,0 8.975394960324771,47.30694780154018,0 8.967015259254271,47.30560838634032,0 8.964675215388214,47.30629591629028,0 "
			+ "8.956626909225271,47.30427359632531,0 8.953581318879934,47.29860463282432,0 8.952362403479279,47.29879574187103,0 8.95176601689778,47.29754817386765,0 8.951833853372458,47.29649874769578,0 8.950572804231108,47.29495310052594,0 "
			+ "8.948630778437071,47.29331268836926,0 8.949254271393933,47.29202803107289,0 8.944412979772341,47.2907572311678,0 8.943019885742228,47.29112066255084,0 8.940897238067018,47.28990594206422,0 8.93729539635719,47.28905364932371,0 "
			+ "8.935707637487889,47.28891400204664,0 8.934010337139121,47.28805693629493,0 8.934642867190236,47.28762480360288,0 8.935594665610056,47.28755071994882,0 8.936402102097008,47.28717518638883,0 8.93820304590623,47.28515534601684,0 "
			+ "8.940371946110886,47.28421597400416,0 8.940333531610884,47.28357556702319,0 8.940884404836041,47.28347445408833,0 8.94187047841449,47.28227500061468,0 8.941641311730862,47.28067955938655,0 8.941271576307305,47.28028147398771,0 "
			+ "8.94115888482286,47.27983287502815,0 8.942002974741161,47.27958140244402,0 8.943472753154937,47.27947798714499,0 8.943806148288058,47.27995097031759,0 8.945729042288086,47.28204091291919,0 8.947417946784441,47.2816625822903,0 "
			+ "8.948171237165873,47.28103447965513,0 8.948363715522188,47.28075760852709,0 8.948029998867558,47.2800477602924,0 8.948124969819,47.27967900881713,0 8.947811896941158,47.27919284487538,0 8.947970965774964,47.27790605453142,0 "
			+ "8.94759639546929,47.27671632567334,0 8.947564052904284,47.27598664757649,0 8.947308143941225,47.27577604758577,0 8.947391147420195,47.27543016527169,0 8.947161851623203,47.27491223580673,0 8.945970031374813,47.27435832311742,0 "
			+ "8.94517627514267,47.27412986998953,0 8.944267537367361,47.27357523752592,0 8.942591228885197,47.27238879623012,0 8.941118081490586,47.27212360470931,0 8.94100342749535,47.27185503977402,0 8.941058273209778,47.27152844488545,0 "
			+ "8.94246731855656,47.27041114596333,0 8.942662826098076,47.26993057300966,0 8.94410281731782,47.26931246527018,0 8.942977407259916,47.26728162463948,0 8.940235821430997,47.26707790738319,0 8.940387551021669,47.26644595495484,0 "
			+ "8.939764449434062,47.26595626629236,0 8.940745155901396,47.26563805295977,0 8.937893529135897,47.2641713869194,0 8.937483056949237,47.26241243508422,0 8.936884354599199,47.26238681584153,0 8.936802247584852,47.26195371435495,0 "
			+ "8.935923507338703,47.26179336439895,0 8.936909553629782,47.26144347368958,0 8.936961352878512,47.26104068833612,0 8.936244488461544,47.26079920043856,0 8.935789465055631,47.2603905184388,0 8.934212640532177,47.25989674149858,0 "
			+ "8.933042272548411,47.25877264322487,0 8.931598402851467,47.25895173492007,0 8.930480409327108,47.25959836345949,0 8.92989839822036,47.25964365621937,0 8.929166565754832,47.25990883262469,0 8.928581683966829,47.25939797993757,0 "
			+ "8.928362951408584,47.25879844461711,0 8.924952487217148,47.25816248977671,0 8.922036367518114,47.25720328706374,0 8.920310140863554,47.25700234058912,0 8.92039757023162,47.25673762533669,0 8.917452071208292,47.25610671290818,0 "
			+ "8.916824945619332,47.25613177818396,0 8.912742216265919,47.25500565191419,0 8.908557282811083,47.25437622291626,0 8.908002653510456,47.25499236352683,0 8.908666854314992,47.25541664995804,0 8.908356619275635,47.25612686422586,0 "
			+ "8.908392834496578,47.25641060110528,0 8.908115050682506,47.25662406627271,0 8.904903405987417,47.25551936213163,0 8.899132978127716,47.25491741958415,0 8.899131428707443,47.25457702175591,0 8.897299825186732,47.25402024745213,0 "
			+ "8.894998432893255,47.25394499098685,0 8.891839009913179,47.25329076929954,0 8.889300747894389,47.25299560947336,0 8.888150283655774,47.25299794173397,0 8.886644351548439,47.25266057251405,0 8.885169234039696,47.25262347239823,0 "
			+ "8.884549065559087,47.25246451522463,0 8.877644417308117,47.25203743534607,0 8.875196454895001,47.25216222412597,0 8.873631702888375,47.25186479790029,0 8.873568369080616,47.25082365121281,0 8.87350836892541,47.25058346895256,0 "
			+ "8.873946598669424,47.24956139364674,0 8.873969229547036,47.24791929321432,0 8.873762656571252,47.24789965185676,0 8.873761399257138,47.24759927226013,0 8.873243127602027,47.24735126022406,0 8.870698655817314,47.24676770116528,0 "
			+ "8.870466764441773,47.24657203432582,0 8.870870773562212,47.24647323800398,0 8.870983435308943,47.24576708603117,0 8.869940281276049,47.24496503465882,0 8.868378669009392,47.24451690280494,0 8.867192124423866,47.2439504154452,0 "
			+ "8.864445582724974,47.24330831802219,0 8.862279693484815,47.24341026414889,0 8.860921025834349,47.24311855880206,0 8.860286948839359,47.24347264780596,0 8.859911460819703,47.24347331451362,0 8.860085894544387,47.24376713935338,0 "
			+ "8.859625031637631,47.2441013098245,0 8.85884613474191,47.24435760533483,0 8.856824823111996,47.24451803256984,0 8.855555371933159,47.24491243246887,0 8.854173339589814,47.2461110016428,0 8.852586848981447,47.24672163817756,0 "
			+ "8.852975000137104,47.25015271707372,0 8.852140805252455,47.25113469113423,0 8.847454998206777,47.24955425197,0 8.84459120918905,47.24850010764428,0 8.840910037012467,47.24768726395875,0 8.839408480124378,47.24712360169136,0 8.838326135833565,47.24696412040873,0 "
			+ "8.835609023539625,47.24712960365748,0 8.835166053144381,47.24877816532969,0 8.834876777832557,47.2490651985641,0 8.834534123442793,47.24917319872273,0 8.83366314519545,47.24910289850623,0 8.831949902558351,47.24966077798165,0 "
			+ "8.830841792732434,47.24969828347072,0 8.829892881734615,47.25000420908484,0 8.829179733269735,47.24979034190877,0 8.828389946253727,47.25034677593111,0 8.827175029978584,47.25000826088073,0 8.827124408686267,47.25067105987944,0 "
			+ "8.826493078824598,47.25128097969709,0 8.821398142315211,47.25066145616587,0 8.820446088514576,47.250244941638,0 8.819579575092259,47.25012368511148,0 8.818459523821129,47.24970882004428,0 8.816979561758508,47.24961289043131,0 "
			+ "8.815861473097492,47.24882349552662,0 8.812955717568681,47.24859083322498,0 8.810572001400587,47.24804189804998,0 8.808945005981537,47.24796518498911,0 8.80690953708892,47.24725796879216,0 8.802840775422293,47.24655333121629,0 "
			+ "8.802312793085584,47.24470040694899,0 8.801557681684136,47.24474080238232,0 8.800859801533708,47.24446561580943,0 8.800800523253223,47.24403187102389,0 8.799693764475657,47.24292899135148,0 8.799113059919597,47.24300859134407,0 "
			+ "8.79922647455534,47.24198305920353,0 8.79696188070028,47.24234079898673,0 8.796497256410838,47.24238080529232,0 8.795850658129361,47.23950260382211,0 8.803252826831967,47.22816863281991,0 8.778184761431527,47.22549634547848,0 ";

	private static final double START = 21600;
	private static final double STOP = 21400;
	private static final double AMOUNT = 2;
	// private static final String[] linkIdsToFilterArray = { "101222", "101221"
	// };
	private Config config;
	private NetworkLayer network;
	private Coord[] usedCoords;
	private ScenarioImpl scenario;

	// TODO change used data here:
	private String usedConf = SCHWEIZCHCONF;

	private String usedOut = SCHWEIZCHOUTBASE + ".kmz";

	private String usedSchemeOut = IVTOUTSCHEME;

	private String usedGoogleEarthCoords = googleEarthPolyCoordsZurichStadt;

	private String usedGisOut = SCHWEIZCHGISOUTBASE;

	private double usedStart = START;

	private double usedStop = STOP;

	private double usedAmount = AMOUNT;

	// private String[] usedLinkIdsToFilterArray = linkIdsToFilterArray;

	public TollSchemeGenerator() {
		// read the config
		this.config = new Config();
		this.config.addCoreModules();
		Gbl.setConfig(this.config);
		MatsimConfigReader confReader = new MatsimConfigReader(this.config);
		confReader.readFile(this.usedConf);

		// TODO change used data here:
		// this.usedCoords = equilPolyCoords;
		this.usedCoords = parseGoogleEarthCoord(this.config);

		// // prepare data
		// List<Id> linkIdsToFilter = new ArrayList<Id>(
		// this.usedLinkIdsToFilterArray.length);
		// for (int i = 0; i < this.usedLinkIdsToFilterArray.length; i++) {
		// linkIdsToFilter.add(new IdImpl(this.usedLinkIdsToFilterArray[i]));
		// }

		// do something
		// filter the network with polygon
		NetworkLayer tollNetwork = this.createTollScheme(this.config);
		// filter the highway links explicitly
		// tollNetwork = this.applyLinkIdFilter(tollNetwork, linkIdsToFilter);
		// filter the highways by capacity
		// tollNetwork = this.applyCapacityFilter(tollNetwork, -1, 41000);

		// write kml
		writeKml(tollNetwork, this.usedOut);

		// create the road pricing scheme
		RoadPricingScheme pricingScheme = this
				.createRoadPricingScheme(tollNetwork);
		// write it to file
		writeRoadPricingScheme(pricingScheme);

		writeShapeFile(tollNetwork, this.usedCoords);

	}

	private void writeShapeFile(NetworkLayer network, Coord[] coords) {
		new ShapeFileNetworkWriter().writeNetwork(network, usedGisOut
				+ "Network.shp");
		new ShapeFilePolygonWriter().writePolygon(coords, usedGisOut
				+ "MoutArea.shp");
	}

	private NetworkLayer createTollScheme(Config config) {
		this.scenario = new ScenarioImpl(config);
		this.network = this.scenario.getNetwork();

		NetworkLayer net = filterNetwork(this.network, false);
		log.info("Filtered the network, filtered network layer contains "
				+ net.getLinks().size() + " links.");
		return net;

	}

	private void writeRoadPricingScheme(RoadPricingScheme pricingScheme) {
		RoadPricingWriterXMLv1 pricingSchemeWriter = new RoadPricingWriterXMLv1(
				pricingScheme);
		try {
			pricingSchemeWriter.writeFile(this.usedSchemeOut);
		} catch (IOException e) {
			e.printStackTrace();
		}
		log.info("RoadPricingScheme written to: " + this.usedSchemeOut);
	}

	private RoadPricingScheme createRoadPricingScheme(NetworkLayer tollNetwork) {
		RoadPricingScheme scheme = new RoadPricingScheme(this.network);
		for (Link l : tollNetwork.getLinks().values()) {
			scheme.addLink(l.getId().toString());
		}
		scheme.addCost(this.usedStart, this.usedStop, this.usedAmount);
		return scheme;
	}

	private Coord[] parseGoogleEarthCoord(Config config) {
		String[] coords3d = this.usedGoogleEarthCoords.split(" ");
		String[] singleCoords;
		double x, y;
		CoordinateTransformation transform = TransformationFactory
				.getCoordinateTransformation(TransformationFactory.WGS84,
						config.global().getCoordinateSystem());
		Coord c, coord;
		Coord[] ret = new Coord[coords3d.length];
		int i = 0;
		for (String s : coords3d) {
			singleCoords = s.split(",");
			x = Double.parseDouble(singleCoords[0]);
			y = Double.parseDouble(singleCoords[1]);
			c = new CoordImpl(x, y);
			// log.debug("read coordinate with x: " + x + " y: " + y);
			coord = transform.transform(c);
			// log.debug("transformed coordinate with x: " + coord.getX() +
			// " y: "
			// + coord.getY());
			ret[i] = coord;
			i++;
		}

		return ret;
	}

	private void writeKml(NetworkLayer net, String filename) {

		ObjectFactory kmlObjectFactory = new ObjectFactory();
		KmlType mainKml;
		DocumentType mainDoc;
		FolderType mainFolder;

		KMZWriter writer;

		mainKml = kmlObjectFactory.createKmlType();
		mainDoc = kmlObjectFactory.createDocumentType();
		mainKml.setAbstractFeatureGroup(kmlObjectFactory
				.createDocument(mainDoc));
		// create a folder
		mainFolder = kmlObjectFactory.createFolderType();
		mainFolder.setName("Matsim Data");
		mainDoc.getAbstractFeatureGroup().add(
				kmlObjectFactory.createFolder(mainFolder));
		// the writer
		writer = new KMZWriter(filename);
		try {
			// add the matsim logo to the kml
			ScreenOverlayType logo = MatsimKMLLogo.writeMatsimKMLLogo(writer);
			mainFolder.getAbstractFeatureGroup().add(
					kmlObjectFactory.createScreenOverlay(logo));
			// create coordinate transformation for wgs84
			CoordinateTransformation transform = TransformationFactory
					.getCoordinateTransformation(this.config.global()
							.getCoordinateSystem(), TransformationFactory.WGS84);
			// write the network
			KmlNetworkWriter netWriter = new KmlNetworkWriter(net, transform,
					writer, mainDoc);
			FolderType networkFolder = netWriter.getNetworkFolder();
			mainFolder.getAbstractFeatureGroup().add(
					kmlObjectFactory.createFolder(networkFolder));

			// write moute polygon
			FolderType polygonFolder = kmlObjectFactory.createFolderType();
			polygonFolder.setName("Mout area");

			PolygonType p = kmlObjectFactory.createPolygonType();
			p.setTessellate(true);

			LinearRingType ring = kmlObjectFactory.createLinearRingType();
			Coord transC;
			for (Coord c : this.usedCoords) {
				transC = transform.transform(c);
				PointType point = kmlObjectFactory.createPointType();
				point.getCoordinates().add(
						Double.toString(transC.getX()) + ","
								+ Double.toString(transC.getY()) + ",0.0");
			}
			BoundaryType boundary = kmlObjectFactory.createBoundaryType();
			boundary.setLinearRing(ring);
			p.setOuterBoundaryIs(boundary);
			PlacemarkType polyPlace = kmlObjectFactory.createPlacemarkType();
			polyPlace.setName("Mout area polygon");
			polyPlace.setAbstractGeometryGroup(kmlObjectFactory
					.createPolygon(p));
			polygonFolder.getAbstractFeatureGroup().add(
					kmlObjectFactory.createPlacemark(polyPlace));
			mainFolder.getAbstractFeatureGroup().add(
					kmlObjectFactory.createFolder(polygonFolder));
			// polygonFolder.addFeature(feature)

		} catch (IOException e) {
			Gbl.errorMsg("Cannot create kmz or logo cause: " + e.getMessage());
			e.printStackTrace();
		}
		writer.writeMainKml(mainKml);
		writer.close();
		log.info("Network written to kmz!");
	}

	private NetworkLayer filterNetwork(final NetworkLayer net, boolean full) {
		EditableNetworkLayer n = new EditableNetworkLayer();
		GeometryFactory geofac = new GeometryFactory();
		Coordinate[] geoToolCoords = new Coordinate[this.usedCoords.length];
		int i = 0;
		for (Coord c : this.usedCoords) {
			geoToolCoords[i] = new Coordinate(c.getX(), c.getY());
			i++;
		}
		CoordinateSequence coordsequence = new CoordinateArraySequence(
				geoToolCoords);
		LinearRing shell = new LinearRing(coordsequence, geofac);
		Polygon ppp = new Polygon(shell, new LinearRing[] {}, geofac);

		for (Link l : net.getLinks().values()) {
			Coordinate fromCord = MGC.coord2Coordinate(l.getFromNode()
					.getCoord());
			Coordinate toCord = MGC.coord2Coordinate(l.getToNode().getCoord());

			if (ppp.contains(new Point(new CoordinateArraySequence(
					new Coordinate[] { fromCord }), geofac))
					&& ppp.contains(new Point(new CoordinateArraySequence(
							new Coordinate[] { toCord }), geofac))) {
				n.addLink(l);
			}
		}
		return n;
	}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		new TollSchemeGenerator();
	}

}
